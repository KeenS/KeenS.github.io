---
layout: post
title: "UbuntuでEmacsからGPGを透過的に扱う"
date: 2013-12-04 22:52
comments: true
sharing: true
categories: [Emacs, GPG, Ubuntu]
---
暗号化といえばGPGですがEmacsからGPGで暗号化されたファイルを編集しようとすると毎回パスワードを訊かれて鬱陶しいです。これはキーリングを登録することで解決できました。

<!-- more -->
## Step1 Keyringに登録する

Dashboardから[key]で検索すると[パスワードと鍵]が見付かります。左上の[+]で新たにキーリングを追加します。

![こんな感じ](/images/2013-12-04-1.png "keyring")

GPGを選択します

![こんな感じ](/images/2013-12-04-2.png "Selecting GPG")

必要な情報を入力します。このメールアドレスは実在しなくても作れますが、ブルートフォースかけられたときの警告とかに使われそうなので実在した方が良い気がします。とりあえず後で使うので覚えておいて下さい。

!['Input info "こんな感じ"](/images/2013-12-04-3.png "'Input info "こんな感じ"")

あとはパスワードのプロンプトが出るので入力して、エントロピーを発生させたら終わりです。

## Step2 ファイルを準備する

ここが肝です。ファイルの先頭に

    -*- epa-file-encrypt-to: (my@mailaddress) -*-

を挿入します。既存の暗号化されたファイルでも同じです。

## Step3 暗号化する

`M-x epa-encrypt-file`で暗号化できます。暗号化するファイル名を指定したらキーリングを選べます

![こんな感じ](/images/2013-12-04-4.png "Selecting GPG")

## Step4 編集する

あとはもう透過的に使えます。でもなんか実験してたらファイル保存できなかった。先にGPGで暗号化してたやつはできたのに。要調査です。


