<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Ubuntu | κeenのHappy Hacκing Blog]]></title>
  <link href="http://KeenS.github.io/blog/categories/ubuntu/atom.xml" rel="self"/>
  <link href="http://KeenS.github.io/"/>
  <updated>2013-09-05T17:31:30+09:00</updated>
  <id>http://KeenS.github.io/</id>
  <author>
    <name><![CDATA[κeen]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Redmineのインストール]]></title>
    <link href="http://KeenS.github.io/blog/2013/09/05/install-redmine/"/>
    <updated>2013-09-05T16:35:00+09:00</updated>
    <id>http://KeenS.github.io/blog/2013/09/05/install-redmine</id>
    <content type="html"><![CDATA[<p>私はバイトではプロジェクト管理に<a href="http://backlog.jp">Backlog</a>のサービスを利用してますが、同様のOSSにRedmineなるものがあると聞いて動かしてみたときのメモ。</p>

<!-- more -->


<p><a href="http://redmine.jp">Redmine</a>はRuby on Railsで作られたプロジェクト管理用Webアプリケーションで、チケット管理、ガントチャート、マイルストーンなどの機能があります。ほぼBacklogと同じですね。</p>

<p>Redmineの管理団体(？)が<a href="http://hosting.redmine.jp/">MyRedmine</a>というホスティングサービスを提供してたりしますが、今回はローカルで動かします。</p>

<p><a href="http://redmine.jp/guide/RedmineInstall/">公式ドキュメント</a>を参考に作業していきます。</p>

<p>まずはダウンロード。現在の最新版は2.3.2だそうです。</p>

<pre><code>$cd ~/Ruby
$svn checkout http://svn.redmine.org/redmine/branches/2.3-stable redmine    
</code></pre>

<p>んで、グローバルの空間を汚したくないので新たにGemsetを作ります</p>

<pre><code>$rvm use --create 1.9.3@redmine
$cd redmine
</code></pre>

<p>デフォルトだとMySQLを使う設定になってますがこんなお試しにのためにMySQLを動かしたくないのでSQLiteに変更。</p>

<pre><code>$cp config/{database.yml.example, database.yml}
</code></pre>

<p>のあと、database.ymlのproductionの部分を以下のように変更。</p>

<pre><code>#database.yml
production:
    adapter: sqlite3
    database: db/redmine.sqlite3
</code></pre>

<p>ここまできたらあとはbundle install。(bundlerはインストールされてる前提です)</p>

<pre><code>$bundle install --without development test
</code></pre>

<p>すると…あれ？RMagickでコケる…。公式ドキュメントには bundleの&mdash;withoutにrmagickを加えろと書いてますが画像扱えないのは悔しいので色々調べた結果、</p>

<pre><code>$sudo apt-get install libmagic-dev libmagickwand-dev
</code></pre>

<p>で依存関係を満せるようです。これでようやくbundle installが通ります。</p>

<p>ここまできたらあとはドキュメント通り。</p>

<pre><code>$rake generate_session_store
$RAILS_ENV=production rake db:migrate
$rails s
</code></pre>

<p>…あれ？rails sでコケる。<br/>
これは自分がrailsに慣れてなかったのが問題のようで、正しくは</p>

<pre><code>$rails s -e production
</code></pre>

<p>だそうです。</p>

<pre><code>$RAILS_ENV=production rails s
</code></pre>

<p>としても同じ。これで<a href="http://localhost:3000">localhost:3000</a>にアクセスするとRedmineが開きます。</p>

<p><img src="/images/redmine-home.png" title="&lsquo;redmine-home&rsquo; &lsquo;Redmineのホーム画面&rsquo;" ></p>

<p>因みにAdminのID、パスワードはadminだそうです。</p>

<p>データベースの設定のexample部分にjenkinsとかいう文字列があったけど連携できるのかなぁ。要調査。</p>

<hr />

<h3>補足</h3>

<p>デフォルトのWEBrickだと遅いのでGemfileに</p>

<pre><code>gem "thin"
</code></pre>

<p>を加えてbundle installし直すと自動的にThinを使ってくれるそうです。</p>
]]></content>
  </entry>
  
</feed>
