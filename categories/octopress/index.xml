<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
      <title>Octopress on κeenのHappy Hacκing Blog </title>
      <generator uri="https://hugo.spf13.com">Hugo</generator>
    <link>/categories/octopress/index.xml/</link>
    <language>en-us</language>
    
    
    <updated>Tue, 30 Dec 2014 03:26:58 UTC</updated>
    
    <item>
      <title>OctopressからHugoに移行した</title>
      <link>/blog/2014/12/30/migration-from-octopress-to-hugo</link>
      <pubDate>Tue, 30 Dec 2014 03:26:58 UTC</pubDate>
      
      <guid>/blog/2014/12/30/migration-from-octopress-to-hugo</guid>
      <description>

&lt;p&gt;κeenです。年末ですね。&lt;a href=&#34;http://deeeet.com/writing/2014/12/25/hugo/&#34;&gt;こちらのブログ&lt;/a&gt;にもあるようにOctopressの生成の遅さに閉口してたのでHugoに移行しました。
出来るだけブログのURLは変えないようにしました。でもどっかでリンク切れちゃってるかも。&lt;/p&gt;

&lt;p&gt;Octopressは遲い以外にもテンプレートのファイルが多い、Rubyのインストールと&lt;code&gt;bundle install&lt;/code&gt;が必要、柔軟性がない、など不満があったのですがバイナリ配布のHugoは~/binに置くだけで良いですしテーマが気に入らなければユーザーがオーバーライドする仕組みもあるので好きにいじれます。まあ、結局テーマをフォークしちゃったんですけどね。&lt;/p&gt;

&lt;h1 id=&#34;toc_0&#34;&gt;作業&lt;/h1&gt;

&lt;p&gt;Markdownとメタデータは概ね互換性があるのでcontent/post/に突っ込んで先のブログのワンライナーを回せばとりあえず動きます。URL互換性を保つために&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;cd content/post
for f in *.markdown; do mv ${f} $(basename ${f#*-*-*-} .markdown).md;done
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;みたいなのを回します。ヒストリ搜すの面倒なので今即興で書きました。&lt;/p&gt;

&lt;p&gt;んで記事にカテゴリのタグが欲いのと日付をISOっぽくしたかったのでテンプレートをオーバーライド。あ、テンプレートは&lt;a href=&#34;https://github.com/eliasson/liquorice/&#34;&gt;liquorice&lt;/a&gt;を使いました。&lt;/p&gt;

&lt;h1 id=&#34;toc_1&#34;&gt;シンタックスハイライト&lt;/h1&gt;

&lt;p&gt;Hugoはデフォルトでは提供しません。サーバーサイドでやろうとするとpygmentsが遲いから。クライアントサイドだと複数あるらしいので&lt;a href=&#34;https://highlightjs.org/&#34;&gt;highlight.js&lt;/a&gt;にしてみました。Clojure REPLとか絶妙なものがあって良いですね。個人的にはコマンドラインのハイライトが欲かった…&lt;/p&gt;

&lt;h1 id=&#34;toc_2&#34;&gt;スライド&lt;/h1&gt;

&lt;p&gt;Octopressの時はテーマに手を入れるわreveal.jsのテーマは自作するわちょっと表には出せないアドホックでダーティーなプラグインを作るわしてreveal.jsに無理やりブログのテーマを載せてました。&lt;/p&gt;

&lt;p&gt;今回はHugoテーマをフォークしてslide用のテンプレート書いて、Octopressの時に使っていたreveal.jsの自作テーマを少しいじるだけで済みました。しかもブロクにreveal.jsを埋め込む形になってます。この際&lt;a href=&#34;http://remarkjs.com/&#34;&gt;remark.js&lt;/a&gt;にしようかとも思ったのですがまたスライドのテーマ作るの面倒だったのでreveal.jsのままで。remark.jsだったら苦労せずとも導入出来たのかなぁ。&lt;/p&gt;

&lt;p&gt;一番の問題はreveal.jsにはmarkdownを食わせるのですが、Hugoがmarkdownをレンダリングしちゃうところですね。Octopressではプラグインで先にスライドだけ処理しちゃってOctopressには触らせないことで実現してました。&lt;/p&gt;

&lt;p&gt;Hugoはgoのテンプレートを使っているのですがこれまた癖があって文脈に応じてそのまま出したりレンダリングしたりHTMLエスケープしたりJSエスケープしたりします。試行錯誤する内に &lt;em&gt;markdown 全体を&lt;code&gt;&amp;lt;section&amp;gt;&lt;/code&gt;で囲むとレンダリングされない&lt;/em&gt; というバグっぽい挙動を見付けました。というこで汚ないんですがスライドは各記事を手動で&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;section data-markdown
    data-separator=&amp;quot;\n\n&amp;quot;
    data-vertical=&amp;quot;\n\n&amp;quot;
    data-notes=&amp;quot;^Note:&amp;quot;&amp;gt;
&amp;lt;script type=&amp;quot;text/template&amp;quot;&amp;gt;


&amp;lt;/script&amp;gt;
&amp;lt;/section&amp;gt;

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;で囲むことにしました。&lt;/p&gt;

&lt;h1 id=&#34;toc_3&#34;&gt;雑感&lt;/h1&gt;

&lt;p&gt;速いし導入楽だしもうOctopressに戻りたいとは思わないです。あとauto refleshが便利すぎる。変更したらビルドしてブラウザのリロードまでやってくれます。デュアルディスプレイだと捗りそうですね。&lt;/p&gt;

&lt;p&gt;不満はウィジェットが少ない、コマンド１発でデプロイ出来無い、octomacsが使えない。ソーシャルアイコン気に入ってたのに。&lt;/p&gt;

&lt;p&gt;あと折角なのでブログエントリ全体見返して細かな修正行いました。カテゴリの統一とか。&lt;/p&gt;

&lt;p&gt;これで今年の大掃除終わり！&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>MathJaxを使って数式を埋め込む</title>
      <link>/blog/2014/02/21/mathjax</link>
      <pubDate>Fri, 21 Feb 2014 00:00:00 UTC</pubDate>
      
      <guid>/blog/2014/02/21/mathjax</guid>
      <description>&lt;p&gt;小ネタです。ブログに数式を埋め込むときの話。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.mathjax.org/&#34;&gt;MathJax&lt;/a&gt;はHTMLに$\LaTeX$の式を埋め込んでJavaScriptでMathMLに変換するプロジェクトみたいです。&lt;/p&gt;

&lt;p&gt;Octopressで使うには&lt;code&gt;(ocotpressroot)/source/_includes/custom/head.html&lt;/code&gt;に&lt;/p&gt;

&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table&gt;&lt;tr&gt;
&lt;td class=&#34;gutter&#34;&gt;&lt;pre class=&#34;line-numbers&#34;&gt;&lt;span class=&#34;line-number&#34;&gt;1&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;2&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;3&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;4&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;5&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;6&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;7&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;&#34;&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;script type=&#34;text/x-mathjax-config&#34;&amp;gt;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; MathJax.Hub.Config({ tex2jax: { inlineMath: [[&#39;$&#39;,&#39;$&#39;], [&#34;\\(&#34;,&#34;\\)&#34;]] } });
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;/script&amp;gt;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;script type=&#34;text/javascript&#34;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; src=&#34;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML&#34;&amp;gt;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;/script&amp;gt;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;meta http-equiv=&#34;X-UA-Compatible&#34; CONTENT=&#34;IE=EmulateIE7&#34; /&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;

&lt;p&gt;を追加するだけです。&lt;/p&gt;

&lt;p&gt;数式を埋め込むには、上の設定だと&lt;code&gt;$数式$&lt;/code&gt;又は&lt;code&gt;\\\(数式\\\)&lt;/code&gt;でインライン、&lt;/p&gt;

&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table&gt;&lt;tr&gt;
&lt;td class=&#34;gutter&#34;&gt;&lt;pre class=&#34;line-numbers&#34;&gt;&lt;span class=&#34;line-number&#34;&gt;1&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;2&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;3&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;&#34;&gt;&lt;span class=&#34;line&#34;&gt;\\\[
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;数式
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;\\\]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;

&lt;p&gt;で別行立ての数式が書けます。markdownとコンフリクトするのでバックスラッシュのエスケープ大変ですね…。&lt;code&gt;\begin{eqnarray*}\end{eqnarray*}&lt;/code&gt;は無理なのかなあ&lt;/p&gt;

&lt;p&gt;インライン\(e^{i\pi} = -1\)&lt;/p&gt;

&lt;p&gt;別行\\[\lim_{n \to \infty} P(Z=l) = e^{–\lambda} \frac{ \lambda ^l}{l!}\]&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Octopressのgistプラグインが動かなかったので修正した</title>
      <link>/blog/2013/09/26/patch-to-gist-plugin</link>
      <pubDate>Thu, 26 Sep 2013 00:00:00 UTC</pubDate>
      
      <guid>/blog/2013/09/26/patch-to-gist-plugin</guid>
      <description>

&lt;p&gt;どうもGithubのgistのURLが変わってる(?)っぽくてOctopressのgistプラグインが動いてくれなかったので修正しました。&lt;/p&gt;

&lt;p&gt;Octopressの最新版でも修正されてなかったっぽいです。自分の使い方が悪かったのかなぁ…&lt;/p&gt;

&lt;p&gt;原因は生のソースコードを取ってくるときに&lt;code&gt;&amp;quot;https://raw.github.com/gist/#{gist}/#{file}&amp;quot;&lt;/code&gt;にアクセスするんですがそいつが404返すんですね。ブラウザからgistにいって”view raw”をクリックすると&lt;code&gt;&amp;quot;https://gist.github.com/#{gist_id}/#{gist}/raw/#{file}&amp;quot;&lt;/code&gt;でした。gist_idってかGithubアカウントです。この辺、挙動が怪しくて、gist_idがなくてもリダイレクトしてくれたりしてくれなかったりします。APIによって違うようです。問題の&lt;code&gt;raw&lt;/code&gt;APIはリダイレクトしてくれないので割と大きめにプラグインを書き換える必要がありました。&lt;/p&gt;

&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table&gt;&lt;tr&gt;
&lt;td class=&#34;gutter&#34;&gt;&lt;pre class=&#34;line-numbers&#34;&gt;&lt;span class=&#34;line-number&#34;&gt;1&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;2&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;3&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;4&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;5&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;6&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;7&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;8&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;9&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;10&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;11&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;12&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;13&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;14&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;15&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;16&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;17&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;18&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;19&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;20&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;21&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;22&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;23&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;24&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;25&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;26&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;27&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;28&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;29&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;30&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;31&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;32&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;33&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;34&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;35&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;36&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;37&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;38&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;39&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;40&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;41&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;42&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;43&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;44&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;45&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;46&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;47&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;48&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;49&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;50&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;51&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;52&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;53&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;54&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;55&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;56&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;57&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;58&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;59&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;60&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;61&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;62&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;63&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;64&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;65&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;66&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;67&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;68&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;69&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;70&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;71&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;72&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;73&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;74&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;75&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;76&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;77&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;78&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;79&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;80&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;81&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;82&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;83&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;84&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;85&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;86&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;87&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;88&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;89&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;90&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;91&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;92&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;93&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;94&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;95&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;96&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;97&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;98&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;99&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;100&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;101&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;102&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;103&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;104&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;105&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;106&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;107&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;108&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;109&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;110&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;111&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;112&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;113&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;114&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;115&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;116&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;117&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;118&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;119&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;120&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;121&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;122&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;123&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;124&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;125&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;126&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;127&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;128&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;129&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;&#34;&gt;&lt;span class=&#34;line&#34;&gt;diff --cc plugins/gist_tag.rb
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;index 1620345,0000000..58acd2a
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;mode 100644,000000..100644
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;--- a/plugins/gist_tag.rb
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;+++ b/plugins/gist_tag.rb
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;@@@ -1,105 -1,0 +1,105 @@@
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +# A Liquid tag for Jekyll sites that allows embedding Gists and showing code for non-JavaScript enabled browsers and readers.
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +# by: Brandon Tilly
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +# Source URL: https://gist.github.com/1027674
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +# Post http://brandontilley.com/2011/01/31/gist-tag-for-jekyll.html
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +#
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +# Example usage: //embeds a gist for this plugin
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +require &#39;cgi&#39;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +require &#39;digest/md5&#39;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +require &#39;net/https&#39;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +require &#39;uri&#39;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +module Jekyll
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + class GistTag &amp;lt; Liquid::Tag
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + def initialize(tag_name, text, token)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + super
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + @text = text
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + @cache_disabled = false
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + @cache_folder = File.expand_path &#34;../.gist-cache&#34;, File.dirname( __FILE__ )
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + FileUtils.mkdir_p @cache_folder
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + end
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + def render(context)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;- if parts = @text.match(/([a-zA-Z\d]*) (.*)/)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;- gist, file = parts[1].strip, parts[2].strip
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;- script_url = script_url_for gist, file
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;- code = get_cached_gist(gist, file) || get_gist_from_web(gist, file)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;++ if parts = @text.match(/([a-zA-Z]*) ([a-zA-Z\d]*) (.*)/)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;++ gist_id, gist, file = parts[1].strip, parts[2].strip, parts[3].strip
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;++ script_url = script_url_for gist_id, gist, file
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;++ code = get_cached_gist(gist_id, gist, file) || get_gist_from_web(gist_id, gist, file)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + html_output_for script_url, code
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + else
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + &#34;&#34;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + end
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + end
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + def html_output_for(script_url, code)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + code = CGI.escapeHTML code
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + &amp;lt;&amp;lt;-HTML
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +&amp;lt;div&amp;gt;&amp;lt;script src=&#39;#{script_url}&#39;&amp;gt;&amp;lt;/script&amp;gt;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +&amp;lt;noscript&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code&amp;gt;#{code}&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/noscript&amp;gt;&amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + HTML
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + end
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;- def script_url_for(gist_id, filename)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;- url = &#34;https://gist.github.com/#{gist_id}.js&#34;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;++ def script_url_for(gist_id, gist, filename)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;++ url = &#34;https://gist.github.com/#{gist_id}/#{gist}.js&#34;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + url = &#34;#{url}?file=#{filename}&#34; unless filename.nil? or filename.empty?
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + url
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + end
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;- def get_gist_url_for(gist, file)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;- &#34;https://raw.github.com/gist/#{gist}/#{file}&#34;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;++ def get_gist_url_for(gist_id, gist, file)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;++ &#34;https://gist.github.com/#{gist_id}/#{gist}/raw/#{file}&#34;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + end
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;- def cache(gist, file, data)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;- cache_file = get_cache_file_for gist, file
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;++ def cache(gist_id, gist, file, data)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;++ cache_file = get_cache_file_for gist_id, gist, file
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + File.open(cache_file, &#34;w&#34;) do |io|
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + io.write data
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + end
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + end
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;- def get_cached_gist(gist, file)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;++ def get_cached_gist(gist_id, gist, file)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + return nil if @cache_disabled
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;- cache_file = get_cache_file_for gist, file
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;++ cache_file = get_cache_file_for gist_id, gist, file
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + File.read cache_file if File.exist? cache_file
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + end
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;- def get_cache_file_for(gist, file)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;++ def get_cache_file_for(gist_id, gist, file)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + bad_chars = /[^a-zA-Z0-9\-_.]/
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + gist = gist.gsub bad_chars, &#39;&#39;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + file = file.gsub bad_chars, &#39;&#39;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;- md5 = Digest::MD5.hexdigest &#34;#{gist}-#{file}&#34;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;- File.join @cache_folder, &#34;#{gist}-#{file}-#{md5}.cache&#34;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;++ md5 = Digest::MD5.hexdigest &#34;#{gist_id}-#{gist}-#{file}&#34;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;++ File.join @cache_folder, &#34;#{gist_id}-#{gist}-#{file}-#{md5}.cache&#34;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + end
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;- def get_gist_from_web(gist, file)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;- gist_url = get_gist_url_for gist, file
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;++ def get_gist_from_web(gist_id, gist, file)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;++ gist_url = get_gist_url_for gist_id, gist, file
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + raw_uri = URI.parse gist_url
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + proxy = ENV[&#39;http_proxy&#39;]
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + if proxy
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + proxy_uri = URI.parse(proxy)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + https = Net::HTTP::Proxy(proxy_uri.host, proxy_uri.port).new raw_uri.host, raw_uri.port
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + else
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + https = Net::HTTP.new raw_uri.host, raw_uri.port
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + end
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + https.use_ssl = true
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + https.verify_mode = OpenSSL::SSL::VERIFY_NONE
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + request = Net::HTTP::Get.new raw_uri.request_uri
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + data = https.request request
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + if data.code.to_i != 200
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + raise RuntimeError, &#34;Gist replied with #{data.code} for #{gist_url}&#34;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + end
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + data = data.body
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;- cache gist, file, data unless @cache_disabled
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;++ cache gist_id, gist, file, data unless @cache_disabled
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + data
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + end
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + end
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + class GistTagNoCache &amp;lt; GistTag
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + def initialize(tag_name, text, token)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + super
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + @cache_disabled = true
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + end
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; + end
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +end
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +Liquid::Template.register_tag(&#39;gist&#39;, Jekyll::GistTag)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; +Liquid::Template.register_tag(&#39;gistnocache&#39;, Jekyll::GistTagNoCache)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;

&lt;p&gt;なんかOctopressのブランチが面倒だったり&lt;code&gt;magit.el&lt;/code&gt;の使い方がよく分らなかったのでアレですが伝えたいことは伝わるdiffだと思います。&lt;/p&gt;

&lt;p&gt;見ての通り&lt;code&gt;gist_id&lt;/code&gt;というパラメーターを追加してリクエストURLをちょこっと書き換えただけです。この修正を加えたあとは&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{% gist KeenS 6688683 script.lisp %}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;で使えます。&lt;/p&gt;

&lt;p&gt;本当にこれでいいのかなあ…なんか違う気がするなぁ。表示もイマイチだし。けどこれしかないのだから仕方がないですね。正確な情報を持ってる方いらっしゃいましたらコメントお願いします。&lt;/p&gt;

&lt;h2 id=&#34;toc_0&#34;&gt;追記&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;http://rcmdnk.github.io/blog/2013/05/06/blog-octopress/&#34;&gt;http://rcmdnk.github.io/blog/2013/05/06/blog-octopress/&lt;/a&gt; にあるエントリを見て変更加えました。やり方は貼られてあるdiffを&lt;code&gt;*scratch*&lt;/code&gt;バッファにコピー、&lt;code&gt;M-x ediff-patch-file&lt;/code&gt;でパッチ適用しました。&lt;/p&gt;

&lt;p&gt;しかしどうもパッチの元のバージョンが古いらしく、何度もエラー出しながら手でパッチファイルを修正しました。もうちょっとパッチに慣れないとな…&lt;/p&gt;

&lt;p&gt;しかも苦労してパッチ適用したのに表示変わらないなーって思ってたらどうもCleanpressは&lt;code&gt;sass/partial&lt;/code&gt;を読み込まないようなので無駄骨でした。&lt;code&gt;sass/parts/_syntax.sass&lt;/code&gt;をひたすら様子見ながら修正しました。&lt;/p&gt;

&lt;p&gt;diffは…いいや。希望があったら晒します。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>octomacs.elを修正しました</title>
      <link>/blog/2013/09/16/octomacs-el</link>
      <pubDate>Mon, 16 Sep 2013 00:00:00 UTC</pubDate>
      
      <guid>/blog/2013/09/16/octomacs-el</guid>
      <description>&lt;p&gt;EmacsからOctopressに投稿できるOctomacs.elが最新版のrvm.elに対応してないようだったので修正してみました。&lt;/p&gt;

&lt;p&gt;原因はOctomacs.elがrvm.elの内部で使われている関数を使っていたのですが、その関数が最新版で削除されていたからだったみたいです。&lt;/p&gt;

&lt;p&gt;結論として、&lt;/p&gt;

&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;table&gt;&lt;tr&gt;
&lt;td class=&#34;gutter&#34;&gt;&lt;pre class=&#34;line-numbers&#34;&gt;&lt;span class=&#34;line-number&#34;&gt;1&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;2&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;3&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;4&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;5&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;6&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;7&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;8&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;9&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;10&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;11&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;12&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;13&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;14&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;15&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;16&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;17&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;18&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;19&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;20&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;21&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;22&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;23&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;24&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;25&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;26&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;27&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;28&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;29&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;30&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;31&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;32&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;33&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;34&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;35&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;36&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;37&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;38&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;39&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;40&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;41&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;42&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;43&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;44&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;45&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;46&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;47&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;48&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;49&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;50&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;51&lt;/span&gt;
&lt;span class=&#34;line-number&#34;&gt;52&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;code class=&#34;&#34;&gt;&lt;span class=&#34;line&#34;&gt;*** /home/kim/.emacs.d/lisp/octomacs/octomacs.el 2013-09-16 22:29:14.498296762 +0900
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;--- /home/kim/.emacs.d/elpa/octomacs-20121026.1649/octomacs.el 2013-08-31 23:54:13.044373498 +0900
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; ***************
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; ***4,10****
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; ;;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; ;; Author: Jacob Helwig &amp;lt;jacob@technosorcery.net&amp;gt;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; ;; Homepage: http://technosorcery.net
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;! ;; Version: 0.0.1
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; ;; URL: https://github.com/jhelwig/octomacs
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; ;;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; ;;; License:
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;--- 4,11 ----
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; ;;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; ;; Author: Jacob Helwig &amp;lt;jacob@technosorcery.net&amp;gt;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; ;; Homepage: http://technosorcery.net
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;! ;; Version: 20121026.1649
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;! ;; X-Original-Version: 0.0.1
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; ;; URL: https://github.com/jhelwig/octomacs
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; ;;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; ;;; License:
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; ***************
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; ***133,146****
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; (defun octomacs-format-rake-task-with-args (task &amp;amp;optional arguments)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; &#34;Build a shell suitable string of the rake TASK name with the specified ARGUMENTS.&#34;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; (let ((arguments-string (if arguments
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;! (format &#34;[%s]&#34; (if (listp arguments) (mapconcat &#39;octomacs-shell-escape-string arguments &#34;, &#34;) arguments))
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; &#34;&#34;)))
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; (format &#34;&#39;%s%s&#39;&#34; task arguments-string)))
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;  
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; (defun octomacs-rake-with-rvm (directory task &amp;amp;optional arguments)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; &#34;Run rake task TASK with specified ARGUMENTS in DIRECTORY using rvm&#34;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; (let* ((default-directory (file-name-as-directory (expand-file-name directory)))
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;! (rvmrc-info (or (rvm--load-info-rvmrc) (rvm--load-info-ruby-version) (rvm--load-info-gemfile)))
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; (rvm-command (if rvmrc-info
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; (concat &#34;rvm &#34; (mapconcat &#39;identity rvmrc-info &#34;@&#34;) &#34; do &#34;)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; &#34;&#34;)))
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;--- 134,148 ----
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; (defun octomacs-format-rake-task-with-args (task &amp;amp;optional arguments)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; &#34;Build a shell suitable string of the rake TASK name with the specified ARGUMENTS.&#34;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; (let ((arguments-string (if arguments
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;! (format &#34;[%s]&#34; (mapconcat &#39;octomacs-shell-escape-string arguments &#34;, &#34;))
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; &#34;&#34;)))
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; (format &#34;&#39;%s%s&#39;&#34; task arguments-string)))
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;  
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; (defun octomacs-rake-with-rvm (directory task &amp;amp;optional arguments)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; &#34;Run rake task TASK with specified ARGUMENTS in DIRECTORY using rvm&#34;
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; (let* ((default-directory (file-name-as-directory (expand-file-name directory)))
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;! (rvmrc-path (rvm--rvmrc-locate directory))
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;! (rvmrc-info (if rvmrc-path (rvm--rvmrc-read-version rvmrc-path) nil))
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; (rvm-command (if rvmrc-info
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; (concat &#34;rvm &#34; (mapconcat &#39;identity rvmrc-info &#34;@&#34;) &#34; do &#34;)
&lt;/span&gt;&lt;span class=&#34;line&#34;&gt; &#34;&#34;)))
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;

&lt;p&gt;こんな感じです。これでちゃんと&lt;code&gt;.rvmrc&lt;/code&gt;やら&lt;code&gt;.ruby-version&lt;/code&gt;やら&lt;code&gt;.ruby-gemset&lt;/code&gt;やらを反映してくれます。 &lt;a href=&#34;https://github.com/jhelwig/octomacs/pull/2&#34;&gt;pull-req投げてみました&lt;/a&gt;。初pull-reqです。英語心配です。&lt;/p&gt;

&lt;p&gt;俺、pull-reqとりこまれたら&lt;code&gt;rake gen_deploy&lt;/code&gt;にも挑戦するんだ…&lt;/p&gt;

&lt;p&gt;あ、因みにこの投稿は&lt;code&gt;init.el&lt;/code&gt;に&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;(setq octomacs-workdir-alist &#39;((&amp;quot;default&amp;quot; . &amp;quot;~/Ruby/octopress&amp;quot;)))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;して&lt;code&gt;octomacs-new-post&lt;/code&gt;から投稿してます。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>COOKPADのアイコン</title>
      <link>/blog/2013/09/07/cookpad</link>
      <pubDate>Sat, 07 Sep 2013 00:00:00 UTC</pubDate>
      
      <guid>/blog/2013/09/07/cookpad</guid>
      <description>&lt;p&gt;クックパッドにレシピ初投稿の記念として左上のソーシャルアイコンにクックパッドを追加しました。&lt;/p&gt;

&lt;p&gt;もともとソーシャルアイコン自体今使ってるOctopressのテーマ、CleanPressにはないのですが、別のテーマからもらってきました。&lt;/p&gt;

&lt;p&gt;加えた変更は&lt;br /&gt;
source/_includes/header.htmlに&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;nav id=&amp;quot;sub-nav&amp;quot;&amp;gt;{% include custom/social.html %}&amp;lt;/nav&amp;gt;&amp;lt;br&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;を、&lt;br /&gt;
source/_includes/custom/social.htmlのdivの中に&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;{% if site.cookpad_user %}
&amp;lt;a class=&amp;quot;cookpad&amp;quot; href=&amp;quot;http://cookpad.com/kitchen/3303629&amp;quot; title=&amp;quot;COOKPAD&amp;quot;&amp;gt;COOKPAD&amp;lt;/a&amp;gt;
{% endif %}

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;を、&lt;br /&gt;
sass/parts/_header.scssの&amp;amp;.githubとかが並んでるところに&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sass&#34;&gt;&amp;amp;.cookpad{
    background: image-url(&#39;social/cookpad.png&#39;) center no-repeat #FF9933;
    border: 1px solid #FF9933;
        &amp;amp;:hover{
            border: 1px solid darken(#FF9933, 10%);
        }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;を、&lt;br /&gt;
_config.ymlに&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;#COOKPAD
cookpad_user: your_ID
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;を加え、&lt;br /&gt;
source/images/social/に &lt;a href=&#34;/images/social/cookpad.png&#34;&gt;この画像&lt;/a&gt;をつっこみました。16x16なのでめっちゃちっちゃいです。&lt;/p&gt;

&lt;p&gt;画像はクックパッドの公式のバナーのピクセル数を数えながら作ったのですが、アンチエイリアスのかけかたとか分らなかったので質はかなり低いです。かといって公式のやつ勝手に改造はマズいでしょうし。&lt;/p&gt;

&lt;p&gt;16x16で白い部分のみ、背景透過でだれか作って下さい←&lt;br /&gt;
因みに私の作った画像は自由にご使用下さい。&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>