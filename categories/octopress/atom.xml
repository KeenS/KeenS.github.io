<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: octopress | κeenのHappy Hacκing Blog]]></title>
  <link href="http://KeenS.github.io/categories/octopress/atom.xml" rel="self"/>
  <link href="http://KeenS.github.io/"/>
  <updated>2014-08-08T23:59:43+09:00</updated>
  <id>http://KeenS.github.io/</id>
  <author>
    <name><![CDATA[κeen]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[MathJaxを使って数式を埋め込む]]></title>
    <link href="http://KeenS.github.io/blog/2014/02/21/mathjax/"/>
    <updated>2014-02-21T06:58:00+09:00</updated>
    <id>http://KeenS.github.io/blog/2014/02/21/mathjax</id>
    <content type="html"><![CDATA[<p>小ネタです。ブログに数式を埋め込むときの話。</p>

<!-- more -->


<p><a href="http://www.mathjax.org/">MathJax</a>はHTMLに$\LaTeX$の式を埋め込んでJavaScriptでMathMLに変換するプロジェクトみたいです。</p>

<p>Octopressで使うには<code>(ocotpressroot)/source/_includes/custom/head.html</code>に</p>

<p><figure class="code"><div class="highlight"><table><tr>
<td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td>
<td class="code"><pre><code class=""><span class="line">&lt;script type=&ldquo;text/x-mathjax-config&rdquo;&gt;
</span><span class="line"> MathJax.Hub.Config({ tex2jax: { inlineMath: [[&lsquo;$&rsquo;,&lsquo;$&rsquo;], [&ldquo;\(&rdquo;,&ldquo;\)&rdquo;]] } });
</span><span class="line">&lt;/script&gt;
</span><span class="line">&lt;script type=&ldquo;text/javascript&rdquo;
</span><span class="line"> src=&ldquo;<a href="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML</a>&rdquo;&gt;
</span><span class="line">&lt;/script&gt;
</span><span class="line">&lt;meta http-equiv=&ldquo;X-UA-Compatible&rdquo; CONTENT=&ldquo;IE=EmulateIE7&rdquo; /&gt;</span></code></pre></td>
</tr></table></div></figure></p>

<p>を追加するだけです。</p>

<p>数式を埋め込むには、上の設定だと<code>$数式$</code>又は<code>\\\(数式\\\)</code>でインライン、</p>

<p><figure class="code"><div class="highlight"><table><tr>
<td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td>
<td class="code"><pre><code class=""><span class="line">\[
</span><span class="line">数式
</span><span class="line">\]</span></code></pre></td>
</tr></table></div></figure></p>

<p>で別行立ての数式が書けます。markdownとコンフリクトするのでバックスラッシュのエスケープ大変ですね…。<code>\begin{eqnarray*}\end{eqnarray*}</code>は無理なのかなあ</p>

<p>インライン(e^{i\pi} = -1)</p>

<p>別行[\lim_{n \to \infty} P(Z=l) = e^{–\lambda} \frac{ \lambda ^l}{l!}]</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopressのgistプラグインが動かなかったので修正した]]></title>
    <link href="http://KeenS.github.io/blog/2013/09/26/patch-to-gist-plugin/"/>
    <updated>2013-09-26T22:57:00+09:00</updated>
    <id>http://KeenS.github.io/blog/2013/09/26/patch-to-gist-plugin</id>
    <content type="html"><![CDATA[<p>どうもGithubのgistのURLが変わってる(?)っぽくてOctopressのgistプラグインが動いてくれなかったので修正しました。</p>

<!-- more -->


<p>Octopressの最新版でも修正されてなかったっぽいです。自分の使い方が悪かったのかなぁ…</p>

<p>原因は生のソースコードを取ってくるときに<code>"https://raw.github.com/gist/#{gist}/#{file}"</code>にアクセスするんですがそいつが404返すんですね。ブラウザからgistにいって”view raw”をクリックすると<code>"https://gist.github.com/#{gist_id}/#{gist}/raw/#{file}"</code>でした。gist_idってかGithubアカウントです。この辺、挙動が怪しくて、gist_idがなくてもリダイレクトしてくれたりしてくれなかったりします。APIによって違うようです。問題の<code>raw</code>APIはリダイレクトしてくれないので割と大きめにプラグインを書き換える必要がありました。</p>

<p><figure class="code"><div class="highlight"><table><tr>
<td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
<span class="line-number">68</span>
<span class="line-number">69</span>
<span class="line-number">70</span>
<span class="line-number">71</span>
<span class="line-number">72</span>
<span class="line-number">73</span>
<span class="line-number">74</span>
<span class="line-number">75</span>
<span class="line-number">76</span>
<span class="line-number">77</span>
<span class="line-number">78</span>
<span class="line-number">79</span>
<span class="line-number">80</span>
<span class="line-number">81</span>
<span class="line-number">82</span>
<span class="line-number">83</span>
<span class="line-number">84</span>
<span class="line-number">85</span>
<span class="line-number">86</span>
<span class="line-number">87</span>
<span class="line-number">88</span>
<span class="line-number">89</span>
<span class="line-number">90</span>
<span class="line-number">91</span>
<span class="line-number">92</span>
<span class="line-number">93</span>
<span class="line-number">94</span>
<span class="line-number">95</span>
<span class="line-number">96</span>
<span class="line-number">97</span>
<span class="line-number">98</span>
<span class="line-number">99</span>
<span class="line-number">100</span>
<span class="line-number">101</span>
<span class="line-number">102</span>
<span class="line-number">103</span>
<span class="line-number">104</span>
<span class="line-number">105</span>
<span class="line-number">106</span>
<span class="line-number">107</span>
<span class="line-number">108</span>
<span class="line-number">109</span>
<span class="line-number">110</span>
<span class="line-number">111</span>
<span class="line-number">112</span>
<span class="line-number">113</span>
<span class="line-number">114</span>
<span class="line-number">115</span>
<span class="line-number">116</span>
<span class="line-number">117</span>
<span class="line-number">118</span>
<span class="line-number">119</span>
<span class="line-number">120</span>
<span class="line-number">121</span>
<span class="line-number">122</span>
<span class="line-number">123</span>
<span class="line-number">124</span>
<span class="line-number">125</span>
<span class="line-number">126</span>
<span class="line-number">127</span>
<span class="line-number">128</span>
<span class="line-number">129</span>
</pre></td>
<td class="code"><pre><code class=""><span class="line">diff &mdash;cc plugins/gist_tag.rb
</span><span class="line">index 1620345,0000000..58acd2a
</span><span class="line">mode 100644,000000..100644
</span><span class="line">&mdash;&ndash; a/plugins/gist_tag.rb
</span><span class="line">+++ b/plugins/gist_tag.rb
</span><span class="line">@@@ -1,105 -1,0 +1,105 @@@
</span><span class="line"> +# A Liquid tag for Jekyll sites that allows embedding Gists and showing code for non-JavaScript enabled browsers and readers.
</span><span class="line"> +# by: Brandon Tilly
</span><span class="line"> +# Source URL: <a href="https://gist.github.com/1027674">https://gist.github.com/1027674</a>
</span><span class="line"> +# Post <a href="http://brandontilley.com/2011/01/31/gist-tag-for-jekyll.html">http://brandontilley.com/2011/01/31/gist-tag-for-jekyll.html</a>
</span><span class="line"> +#
</span><span class="line"> +# Example usage: //embeds a gist for this plugin
</span><span class="line"> +
</span><span class="line"> +require &lsquo;cgi&rsquo;
</span><span class="line"> +require &lsquo;digest/md5&rsquo;
</span><span class="line"> +require &lsquo;net/https&rsquo;
</span><span class="line"> +require &lsquo;uri&rsquo;
</span><span class="line"> +
</span><span class="line"> +module Jekyll
</span><span class="line"> + class GistTag &lt; Liquid::Tag
</span><span class="line"> + def initialize(tag_name, text, token)
</span><span class="line"> + super
</span><span class="line"> + @text = text
</span><span class="line"> + @cache_disabled = false
</span><span class="line"> + @cache_folder = File.expand_path &ldquo;../.gist-cache&rdquo;, File.dirname( <strong>FILE</strong> )
</span><span class="line"> + FileUtils.mkdir_p @cache_folder
</span><span class="line"> + end
</span><span class="line"> +
</span><span class="line"> + def render(context)
</span><span class="line">&ndash; if parts = @text.match(/([a-zA-Z\d]<em>) (.</em>)/)
</span><span class="line">&ndash; gist, file = parts[1].strip, parts[2].strip
</span><span class="line">&ndash; script_url = script_url_for gist, file
</span><span class="line">&ndash; code = get_cached_gist(gist, file) || get_gist_from_web(gist, file)
</span><span class="line">++ if parts = @text.match(/([a-zA-Z]<em>) ([a-zA-Z\d]</em>) (.*)/)
</span><span class="line">++ gist_id, gist, file = parts[1].strip, parts[2].strip, parts[3].strip
</span><span class="line">++ script_url = script_url_for gist_id, gist, file
</span><span class="line">++ code = get_cached_gist(gist_id, gist, file) || get_gist_from_web(gist_id, gist, file)
</span><span class="line"> + html_output_for script_url, code
</span><span class="line"> + else
</span><span class="line"> + &ldquo;&rdquo;
</span><span class="line"> + end
</span><span class="line"> + end
</span><span class="line"> +
</span><span class="line"> + def html_output_for(script_url, code)
</span><span class="line"> + code = CGI.escapeHTML code
</span><span class="line"> + &lt;&lt;-HTML
</span><span class="line"> +&lt;div&gt;&lt;script src=&lsquo;#{script_url}&rsquo;&gt;&lt;/script&gt;
</span><span class="line"> +&lt;noscript&gt;&lt;pre&gt;&lt;code&gt;#{code}&lt;/code&gt;&lt;/pre&gt;&lt;/noscript&gt;&lt;/div&gt;
</span><span class="line"> + HTML
</span><span class="line"> + end
</span><span class="line"> +
</span><span class="line">&ndash; def script_url_for(gist_id, filename)
</span><span class="line">&ndash; url = &ldquo;<a href="https://gist.github.com/#">https://gist.github.com/#</a>{gist_id}.js&rdquo;
</span><span class="line">++ def script_url_for(gist_id, gist, filename)
</span><span class="line">++ url = &ldquo;<a href="https://gist.github.com/#">https://gist.github.com/#</a>{gist_id}/#{gist}.js&rdquo;
</span><span class="line"> + url = &ldquo;#{url}?file=#{filename}&rdquo; unless filename.nil? or filename.empty?
</span><span class="line"> + url
</span><span class="line"> + end
</span><span class="line"> +
</span><span class="line">&ndash; def get_gist_url_for(gist, file)
</span><span class="line">&ndash; &ldquo;<a href="https://raw.github.com/gist/#">https://raw.github.com/gist/#</a>{gist}/#{file}&rdquo;
</span><span class="line">++ def get_gist_url_for(gist_id, gist, file)
</span><span class="line">++ &ldquo;<a href="https://gist.github.com/#">https://gist.github.com/#</a>{gist_id}/#{gist}/raw/#{file}&rdquo;
</span><span class="line"> + end
</span><span class="line"> +
</span><span class="line">&ndash; def cache(gist, file, data)
</span><span class="line">&ndash; cache_file = get_cache_file_for gist, file
</span><span class="line">++ def cache(gist_id, gist, file, data)
</span><span class="line">++ cache_file = get_cache_file_for gist_id, gist, file
</span><span class="line"> + File.open(cache_file, &ldquo;w&rdquo;) do |io|
</span><span class="line"> + io.write data
</span><span class="line"> + end
</span><span class="line"> + end
</span><span class="line"> +
</span><span class="line">&ndash; def get_cached_gist(gist, file)
</span><span class="line">++ def get_cached_gist(gist_id, gist, file)
</span><span class="line"> + return nil if @cache_disabled
</span><span class="line">&ndash; cache_file = get_cache_file_for gist, file
</span><span class="line">++ cache_file = get_cache_file_for gist_id, gist, file
</span><span class="line"> + File.read cache_file if File.exist? cache_file
</span><span class="line"> + end
</span><span class="line"> +
</span><span class="line">&ndash; def get_cache_file_for(gist, file)
</span><span class="line">++ def get_cache_file_for(gist_id, gist, file)
</span><span class="line"> + bad_chars = /[^a-zA-Z0-9-_.]/
</span><span class="line"> + gist = gist.gsub bad_chars, &lsquo;&rsquo;
</span><span class="line"> + file = file.gsub bad_chars, &lsquo;&rsquo;
</span><span class="line">&ndash; md5 = Digest::MD5.hexdigest &ldquo;#{gist}&ndash;#{file}&rdquo;
</span><span class="line">&ndash; File.join @cache_folder, &ldquo;#{gist}&ndash;#{file}&ndash;#{md5}.cache&rdquo;
</span><span class="line">++ md5 = Digest::MD5.hexdigest &ldquo;#{gist_id}&ndash;#{gist}&ndash;#{file}&rdquo;
</span><span class="line">++ File.join @cache_folder, &ldquo;#{gist_id}&ndash;#{gist}&ndash;#{file}&ndash;#{md5}.cache&rdquo;
</span><span class="line"> + end
</span><span class="line"> +
</span><span class="line">&ndash; def get_gist_from_web(gist, file)
</span><span class="line">&ndash; gist_url = get_gist_url_for gist, file
</span><span class="line">++ def get_gist_from_web(gist_id, gist, file)
</span><span class="line">++ gist_url = get_gist_url_for gist_id, gist, file
</span><span class="line"> + raw_uri = URI.parse gist_url
</span><span class="line"> + proxy = ENV[&lsquo;http_proxy&rsquo;]
</span><span class="line"> + if proxy
</span><span class="line"> + proxy_uri = URI.parse(proxy)
</span><span class="line"> + https = Net::<a href="HTTP::Proxy">HTTP::Proxy</a>(proxy_uri.host, proxy_uri.port).new raw_uri.host, raw_uri.port
</span><span class="line"> + else
</span><span class="line"> + https = Net::HTTP.new raw_uri.host, raw_uri.port
</span><span class="line"> + end
</span><span class="line"> + https.use_ssl = true
</span><span class="line"> + https.verify_mode = OpenSSL::SSL::VERIFY_NONE
</span><span class="line"> + request = Net::<a href="HTTP::Get.new">HTTP::Get.new</a> raw_uri.request_uri
</span><span class="line"> + data = https.request request
</span><span class="line"> + if data.code.to_i != 200
</span><span class="line"> + raise RuntimeError, &ldquo;Gist replied with #{data.code} for #{gist_url}&rdquo;
</span><span class="line"> + end
</span><span class="line"> + data = data.body
</span><span class="line">&ndash; cache gist, file, data unless @cache_disabled
</span><span class="line">++ cache gist_id, gist, file, data unless @cache_disabled
</span><span class="line"> + data
</span><span class="line"> + end
</span><span class="line"> + end
</span><span class="line"> +
</span><span class="line"> + class GistTagNoCache &lt; GistTag
</span><span class="line"> + def initialize(tag_name, text, token)
</span><span class="line"> + super
</span><span class="line"> + @cache_disabled = true
</span><span class="line"> + end
</span><span class="line"> + end
</span><span class="line"> +end
</span><span class="line"> +
</span><span class="line"> +Liquid::Template.register_tag(&lsquo;gist&rsquo;, Jekyll::GistTag)
</span><span class="line"> +Liquid::Template.register_tag(&lsquo;gistnocache&rsquo;, Jekyll::GistTagNoCache)</span></code></pre></td>
</tr></table></div></figure></p>

<p>なんかOctopressのブランチが面倒だったり<code>magit.el</code>の使い方がよく分らなかったのでアレですが伝えたいことは伝わるdiffだと思います。</p>

<p>見ての通り<code>gist_id</code>というパラメーターを追加してリクエストURLをちょこっと書き換えただけです。この修正を加えたあとは</p>

<pre><code>{% gist KeenS 6688683 script.lisp %}
</code></pre>

<p>で使えます。</p>

<p>本当にこれでいいのかなあ…なんか違う気がするなぁ。表示もイマイチだし。けどこれしかないのだから仕方がないですね。正確な情報を持ってる方いらっしゃいましたらコメントお願いします。</p>

<h2>追記</h2>

<p><a href="http://rcmdnk.github.io/blog/2013/05/06/blog-octopress/">http://rcmdnk.github.io/blog/2013/05/06/blog-octopress/</a>にあるエントリを見て変更加えました。やり方は貼られてあるdiffを<code>*scratch*</code>バッファにコピー、<code>M-x ediff-patch-file</code>でパッチ適用しました。</p>

<p>しかしどうもパッチの元のバージョンが古いらしく、何度もエラー出しながら手でパッチファイルを修正しました。もうちょっとパッチに慣れないとな…</p>

<p>しかも苦労してパッチ適用したのに表示変わらないなーって思ってたらどうもCleanpressは<code>sass/partial</code>を読み込まないようなので無駄骨でした。<code>sass/parts/_syntax.sass</code>をひたすら様子見ながら修正しました。</p>

<p>diffは…いいや。希望があったら晒します。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[octomacs.elを修正しました]]></title>
    <link href="http://KeenS.github.io/blog/2013/09/16/octomacs-el/"/>
    <updated>2013-09-16T21:24:00+09:00</updated>
    <id>http://KeenS.github.io/blog/2013/09/16/octomacs-el</id>
    <content type="html"><![CDATA[<p>EmacsからOctopressに投稿できるOctomacs.elが最新版のrvm.elに対応してないようだったので修正してみました。</p>

<!-- more -->


<p>原因はOctomacs.elがrvm.elの内部で使われている関数を使っていたのですが、その関数が最新版で削除されていたからだったみたいです。</p>

<p>結論として、</p>

<p><figure class="code"><div class="highlight"><table><tr>
<td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
</pre></td>
<td class="code"><pre><code class=""><span class="line"><strong><em> /home/kim/.emacs.d/lisp/octomacs/octomacs.el 2013-09-16 22:29:14.498296762 +0900
</span><span class="line">&mdash;&ndash; /home/kim/.emacs.d/elpa/octomacs-20121026.1649/octomacs.el 2013-08-31 23:54:13.044373498 +0900
</span><span class="line"> </em></strong><strong><strong><em><strong><strong><strong><em>
</span><span class="line"> </em></strong>4,10</strong></strong>
</span><span class="line"> ;;
</span><span class="line"> ;; Author: Jacob Helwig &lt;jacob@technosorcery.net&gt;
</span><span class="line"> ;; Homepage: <a href="http://technosorcery.net">http://technosorcery.net</a>
</span><span class="line">! ;; Version: 0.0.1
</span><span class="line"> ;; URL: <a href="https://github.com/jhelwig/octomacs">https://github.com/jhelwig/octomacs</a>
</span><span class="line"> ;;
</span><span class="line"> ;;; License:
</span><span class="line">&mdash;&ndash; 4,11 &mdash;&mdash;
</span><span class="line"> ;;
</span><span class="line"> ;; Author: Jacob Helwig &lt;jacob@technosorcery.net&gt;
</span><span class="line"> ;; Homepage: <a href="http://technosorcery.net">http://technosorcery.net</a>
</span><span class="line">! ;; Version: 20121026.1649
</span><span class="line">! ;; X-Original-Version: 0.0.1
</span><span class="line"> ;; URL: <a href="https://github.com/jhelwig/octomacs">https://github.com/jhelwig/octomacs</a>
</span><span class="line"> ;;
</span><span class="line"> ;;; License:
</span><span class="line"> </em></strong></strong><em><em><strong><strong><strong><em>*
</span><span class="line"> </em></strong>133,146</strong></strong>
</span><span class="line"> (defun octomacs-format-rake-task-with-args (task &amp;optional arguments)
</span><span class="line"> &ldquo;Build a shell suitable string of the rake TASK name with the specified ARGUMENTS.&rdquo;
</span><span class="line"> (let ((arguments-string (if arguments
</span><span class="line">! (format &ldquo;[%s]&rdquo; (if (listp arguments) (mapconcat &lsquo;octomacs-shell-escape-string arguments &ldquo;, &rdquo;) arguments))
</span><span class="line"> &ldquo;&rdquo;)))
</span><span class="line"> (format &ldquo;&rsquo;%s%s'&rdquo; task arguments-string)))
</span><span class="line"><br/>
</span><span class="line"> (defun octomacs-rake-with-rvm (directory task &amp;optional arguments)
</span><span class="line"> &ldquo;Run rake task TASK with specified ARGUMENTS in DIRECTORY using rvm&rdquo;
</span><span class="line"> (let</em> ((default-directory (file-name-as-directory (expand-file-name directory)))
</span><span class="line">! (rvmrc-info (or (rvm&mdash;load-info-rvmrc) (rvm&mdash;load-info-ruby-version) (rvm&mdash;load-info-gemfile)))
</span><span class="line"> (rvm-command (if rvmrc-info
</span><span class="line"> (concat &ldquo;rvm &rdquo; (mapconcat &lsquo;identity rvmrc-info &ldquo;@&rdquo;) &ldquo; do &rdquo;)
</span><span class="line"> &ldquo;&rdquo;)))
</span><span class="line">&mdash;&ndash; 134,148 &mdash;&mdash;
</span><span class="line"> (defun octomacs-format-rake-task-with-args (task &amp;optional arguments)
</span><span class="line"> &ldquo;Build a shell suitable string of the rake TASK name with the specified ARGUMENTS.&rdquo;
</span><span class="line"> (let ((arguments-string (if arguments
</span><span class="line">! (format &ldquo;[%s]&rdquo; (mapconcat 'octomacs-shell-escape-string arguments &ldquo;, &rdquo;))
</span><span class="line"> &ldquo;&rdquo;)))
</span><span class="line"> (format &ldquo;&rsquo;%s%s'&rdquo; task arguments-string)))
</span><span class="line"><br/>
</span><span class="line"> (defun octomacs-rake-with-rvm (directory task &amp;optional arguments)
</span><span class="line"> &ldquo;Run rake task TASK with specified ARGUMENTS in DIRECTORY using rvm&rdquo;
</span><span class="line"> (let</em> ((default-directory (file-name-as-directory (expand-file-name directory)))
</span><span class="line">! (rvmrc-path (rvm&mdash;rvmrc-locate directory))
</span><span class="line">! (rvmrc-info (if rvmrc-path (rvm&mdash;rvmrc-read-version rvmrc-path) nil))
</span><span class="line"> (rvm-command (if rvmrc-info
</span><span class="line"> (concat &ldquo;rvm &rdquo; (mapconcat &lsquo;identity rvmrc-info &ldquo;@&rdquo;) &ldquo; do &rdquo;)
</span><span class="line"> &ldquo;&rdquo;)))
</span></code></pre></td>
</tr></table></div></figure></p>

<p>こんな感じです。これでちゃんと<code>.rvmrc</code>やら<code>.ruby-version</code>やら<code>.ruby-gemset</code>やらを反映してくれます。 <a href="https://github.com/jhelwig/octomacs/pull/2">pull-req投げてみました</a>。初pull-reqです。英語心配です。</p>

<p>俺、pull-reqとりこまれたら<code>rake gen_deploy</code>にも挑戦するんだ…</p>

<p>あ、因みにこの投稿は<code>init.el</code>に</p>

<pre><code>(setq octomacs-workdir-alist '(("default" . "~/Ruby/octopress")))
</code></pre>

<p>して<code>octomacs-new-post</code>から投稿してます。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[COOKPADのアイコン]]></title>
    <link href="http://KeenS.github.io/blog/2013/09/07/cookpad/"/>
    <updated>2013-09-07T19:09:00+09:00</updated>
    <id>http://KeenS.github.io/blog/2013/09/07/cookpad</id>
    <content type="html"><![CDATA[<p>クックパッドにレシピ初投稿の記念として左上のソーシャルアイコンにクックパッドを追加しました。</p>

<!-- more -->


<p>もともとソーシャルアイコン自体今使ってるOctopressのテーマ、CleanPressにはないのですが、別のテーマからもらってきました。</p>

<p>加えた変更は<br/>
source/_includes/header.htmlに</p>

<pre><code>&lt;nav id="sub-nav"&gt;{% include custom/social.html %}&lt;/nav&gt;&lt;br&gt;
</code></pre>

<p>を、<br/>
source/_includes/custom/social.htmlのdivの中に</p>

<pre><code>{% if site.cookpad_user %}
&lt;a class="cookpad" href="http://cookpad.com/kitchen/3303629" title="COOKPAD"&gt;COOKPAD&lt;/a&gt;
{% endif %}
</code></pre>

<p>を、<br/>
sass/parts/_header.scssの&amp;.githubとかが並んでるところに</p>

<pre><code>&amp;.cookpad{
    background: image-url('social/cookpad.png') center no-repeat #FF9933;
    border: 1px solid #FF9933;
        &amp;:hover{
            border: 1px solid darken(#FF9933, 10%);
        }
}
</code></pre>

<p>を、<br/>
_config.ymlに</p>

<pre><code>#COOKPAD
cookpad_user: your_ID
</code></pre>

<p>を加え、<br/>
source/images/social/に <a href="/images/social/cookpad.png">この画像</a>をつっこみました。16x16なのでめっちゃちっちゃいです。</p>

<p>画像はクックパッドの公式のバナーのピクセル数を数えながら作ったのですが、アンチエイリアスのかけかたとか分らなかったので質はかなり低いです。かといって公式のやつ勝手に改造はマズいでしょうし。</p>

<p>16x16で白い部分のみ、背景透過でだれか作って下さい←<br/>
因みに私の作った画像は自由にご使用下さい。</p>
]]></content>
  </entry>
  
</feed>
